import{_ as j,r as _,w as U,c as l,o,b as e,F as b,e as $,t as y,n as z,f as P,d as A,g as G,a as B,h as w,i as H,j as I,k as J,v as K,l as L,m as Q,p as W}from"./index-DZTT0LQi.js";const X=[{id:1,name:"經典紅蘿蔔濃湯",description:"香濃滑甜的紅蘿蔔濃湯，營養滿滿又暖胃",image:"/images/recipes/carrot-soup.jpg",difficulty:"簡單",cookTime:"30分",servings:4,category:"湯品",tags:["素食","簡單"],isRecommended:!0},{id:2,name:"香蕉磅蛋糕",description:"濕潤香甜的香蕉蛋糕，完美的下午茶點心",image:"/images/recipes/banana-cake.jpg",difficulty:"中等",cookTime:"60分",servings:8,category:"甜點",tags:["烘焙","甜點"],isRecommended:!1},{id:3,name:"蒜香青江菜",description:"簡單快炒的青江菜，保持蔬菜的鮮甜口感",image:"/images/recipes/garlic-vegetables.jpg",difficulty:"簡單",cookTime:"15分",servings:4,category:"蔬菜",tags:["素食","簡單"],isRecommended:!1},{id:4,name:"經典番茄蛋花湯",description:"酸甜開胃的番茄蛋花湯，營養豐富又暖胃",image:"/images/recipes/tomato-egg-soup.jpg",difficulty:"簡單",cookTime:"20分",servings:4,category:"湯品",tags:["素食","簡單"],isRecommended:!1},{id:5,name:"彩虹蔬菜沙拉",description:"營養豐富的彩虹蔬菜沙拉，新鮮爽脆又健康",image:"/images/recipes/rainbow-salad.jpg",difficulty:"簡單",cookTime:"10分",servings:2,category:"沙拉",tags:["素食","簡單"],isRecommended:!0},{id:6,name:"麻婆茄子",description:"香辣下飯的麻婆茄子，茄子軟糯入味十分開胃",image:"/images/recipes/mapo-eggplant.jpg",difficulty:"中等",cookTime:"25分",servings:4,category:"蔬菜",tags:["素食","辣味"],isRecommended:!1}],D={features:[{id:"all",label:"全部",checked:!0},{id:"vegetarian",label:"純素食品",checked:!1}],cookTime:[{id:"15min",label:"15分鐘內",checked:!1},{id:"30min",label:"30分鐘內",checked:!1},{id:"1hour",label:"1小時內",checked:!1}],difficulty:[{id:"easy",label:"簡單",checked:!1},{id:"medium",label:"普通",checked:!1},{id:"hard",label:"困難",checked:!1}]},Y=[{id:"all",label:"全部",color:"#4CAF50"},{id:"soup",label:"湯品",color:"#FF9800"},{id:"vegetable",label:"蔬菜",color:"#4CAF50"},{id:"dessert",label:"甜點",color:"#E91E63"},{id:"salad",label:"沙拉",color:"#9C27B0"},{id:"meat",label:"肉類",color:"#F44336"},{id:"rice",label:"飯類",color:"#FF5722"}],Z=[{value:"recommend",label:"智慧推薦"},{value:"difficulty",label:"難易度"},{value:"time",label:"料理時間"},{value:"popular",label:"熱門程度"}],ee={class:"recipe-filter-sidebar"},te={class:"filter-section"},se={class:"filter-options"},ae=["checked","onChange"],ie={class:"option-label"},oe={class:"filter-section"},le={class:"filter-options"},ce=["checked","onChange"],ne={class:"option-label"},re={class:"filter-section"},de={class:"filter-options"},ue=["checked","onChange"],me={class:"option-label"},fe={__name:"RecipeSideBar",props:{filters:{type:Object,required:!0}},emits:["update-filters"],setup(u,{emit:h}){const k=u,p=h,i=_({features:[...k.filters.features],cookTime:[...k.filters.cookTime],difficulty:[...k.filters.difficulty]});U(()=>k.filters,v=>{i.value={features:[...v.features],cookTime:[...v.cookTime],difficulty:[...v.difficulty]}},{deep:!0});const g=(v,r)=>{const t=i.value.features.find(c=>c.id===v);if(t){if(t.checked=r,v==="all"&&r)i.value.features.forEach(c=>{c.id!=="all"&&(c.checked=!1)});else if(v!=="all"&&r){const c=i.value.features.find(M=>M.id==="all");c&&(c.checked=!1)}}},a=(v,r)=>{const t=i.value.cookTime.find(c=>c.id===v);t&&(t.checked=r)},C=(v,r)=>{const t=i.value.difficulty.find(c=>c.id===v);t&&(t.checked=r)},T=()=>{p("update-filters",{features:[...i.value.features],cookTime:[...i.value.cookTime],difficulty:[...i.value.difficulty]})};return(v,r)=>(o(),l("div",ee,[e("div",te,[r[0]||(r[0]=e("h3",{class:"filter-title"},"特色篩選",-1)),e("div",se,[(o(!0),l(b,null,$(i.value.features,t=>(o(),l("label",{key:t.id,class:"filter-option"},[e("input",{type:"checkbox",checked:t.checked,onChange:c=>g(t.id,c.target.checked)},null,40,ae),e("span",ie,y(t.label),1)]))),128))])]),e("div",oe,[r[1]||(r[1]=e("h3",{class:"filter-title"},"料理時間",-1)),e("div",le,[(o(!0),l(b,null,$(i.value.cookTime,t=>(o(),l("label",{key:t.id,class:"filter-option"},[e("input",{type:"checkbox",checked:t.checked,onChange:c=>a(t.id,c.target.checked)},null,40,ce),e("span",ne,y(t.label),1)]))),128))])]),e("div",re,[r[2]||(r[2]=e("h3",{class:"filter-title"},"難易度",-1)),e("div",de,[(o(!0),l(b,null,$(i.value.difficulty,t=>(o(),l("label",{key:t.id,class:"filter-option"},[e("input",{type:"checkbox",checked:t.checked,onChange:c=>C(t.id,c.target.checked)},null,40,ue),e("span",me,y(t.label),1)]))),128))])]),e("button",{class:"apply-filter-btn",onClick:T},"套用篩選")]))}},ge=j(fe,[["__scopeId","data-v-485015a7"]]),pe={class:"category-tags-container"},ve={class:"tags-wrapper"},he=["onClick"],ye={__name:"RecipeCategoryTags",props:{categoryTags:{type:Array,required:!0},activeCategory:{type:String,default:"all"}},emits:["category-change"],setup(u,{emit:h}){const k=h,p=i=>{k("category-change",i)};return(i,g)=>(o(),l("div",pe,[e("div",ve,[(o(!0),l(b,null,$(u.categoryTags,a=>(o(),l("button",{key:a.id,class:P(["category-tag",{active:u.activeCategory===a.id}]),style:z({"--tag-color":a.color,backgroundColor:u.activeCategory===a.id?a.color:"transparent",borderColor:a.color,color:u.activeCategory===a.id?"white":a.color}),onClick:C=>p(a.id)},y(a.label),15,he))),128))])]))}},ke=j(ye,[["__scopeId","data-v-e684bf18"]]),_e={key:0,class:"recommend-badge"},be={class:"image-container"},$e={key:0,class:"image-loading"},Ce={key:1,class:"image-error"},Te=["src","alt"],Re={class:"content-area"},Fe={class:"recipe-title"},we={class:"recipe-description"},je={class:"info-row"},Ie={class:"info-item"},xe={class:"info-value"},Me={class:"info-item"},Se={class:"info-value"},Ee={class:"info-item"},Pe={class:"info-value"},Le={class:"tags-row"},x=3,De=2e4,Ae={__name:"RecipeCard",props:{recipe:{type:Object,required:!0}},setup(u){const h=u,k=A(),p=_(!0),i=_(0);let g=null;const a=()=>{k.push(`/ai-recommendation/${h.recipe.id}`)},C=()=>{p.value=!1,i.value=0,console.log(`✅ 圖片載入成功: ${h.recipe.name}`)},T=r=>{const t=r.target,c=t.src;if(p.value=!1,c.includes("/images/placeholder/recipe-placeholder.jpg")){console.warn(`🖼️ 預設圖片也載入失敗: ${h.recipe.name}`),i.value=x+1;return}if(i.value++,console.log(`🔄 圖片載入失敗 (第${i.value}次): ${h.recipe.name}`),i.value>x){console.error(`❌ 圖片載入失敗超過${x}次，停止重試: ${h.recipe.name}`);return}g&&clearTimeout(g),g=setTimeout(()=>{console.log(`🔄 20秒後重試載入預設圖片: ${h.recipe.name}`),p.value=!0,t.src="/images/placeholder/recipe-placeholder.jpg"},De)},v=r=>({素食:"tag-vegetarian",簡單:"tag-easy",烘焙:"tag-baking",甜點:"tag-dessert",辣味:"tag-spicy",湯品:"tag-soup"})[r]||"tag-default";return G(()=>{g&&clearTimeout(g)}),(r,t)=>(o(),l("div",{class:"recipe-card",onClick:a},[u.recipe.isRecommended?(o(),l("div",_e,"推薦")):B("",!0),e("div",be,[p.value?(o(),l("div",$e,t[0]||(t[0]=[e("span",null,"載入中...",-1)]))):i.value>x?(o(),l("div",Ce,[t[1]||(t[1]=e("span",null,"🖼️",-1)),t[2]||(t[2]=e("span",null,"圖片載入失敗",-1)),e("small",null,y(u.recipe.name),1)])):(o(),l("img",{key:2,src:r.$img(u.recipe.image),alt:u.recipe.name,class:"recipe-image",onLoad:C,onError:T},null,40,Te))]),e("div",Re,[e("h3",Fe,y(u.recipe.name),1),e("p",we,y(u.recipe.description),1),e("div",je,[e("span",Ie,[t[3]||(t[3]=e("span",{class:"info-label"},"難度",-1)),e("span",xe,y(u.recipe.difficulty),1)]),e("span",Me,[t[4]||(t[4]=e("span",{class:"info-label"},"時間",-1)),e("span",Se,y(u.recipe.cookTime),1)]),e("span",Ee,[t[5]||(t[5]=e("span",{class:"info-label"},"份量",-1)),e("span",Pe,y(u.recipe.servings)+"人",1)])]),e("div",Le,[(o(!0),l(b,null,$(u.recipe.tags,c=>(o(),l("span",{key:c,class:P(["recipe-tag",v(c)])},y(c),3))),128))])])]))}},Be=j(Ae,[["__scopeId","data-v-6fec462f"]]),Ne={class:"ai-recommendation-section"},Oe={class:"recommendation-grid"},Ve=["onClick"],qe=["src","alt"],Ue={class:"recommendation-content"},ze={class:"recommendation-title"},Ge={class:"recommendation-meta"},He={__name:"Recommendation",props:{recommendedRecipes:{type:Array,default:()=>[]}},setup(u){const h=A(),k=i=>{h.push(`/ai-recommendation/${i}`)},p=i=>{i.target.src="/images/placeholder/recipe-placeholder.jpg"};return(i,g)=>(o(),l("div",Ne,[g[0]||(g[0]=e("div",{class:"section-header"},[e("span",{class:"ai-icon"},"🤖"),e("h3",{class:"section-title"},"AI 智慧推薦")],-1)),g[1]||(g[1]=e("p",{class:"section-description"}," 根據您的飲食偏好和當季食材，為您智慧推薦最適合的料理，讓每一餐都營養又美味！ ",-1)),e("div",Oe,[(o(!0),l(b,null,$(u.recommendedRecipes,a=>(o(),l("div",{key:a.id,class:"recommendation-item",onClick:C=>k(a.id)},[e("img",{src:i.$img(a.image),alt:a.name,class:"recommendation-image",onError:p},null,40,qe),e("div",Ue,[e("h4",ze,y(a.name),1),e("p",Ge," 難度: "+y(a.difficulty)+" | "+y(a.cookTime),1)])],8,Ve))),128))])]))}},Je=j(He,[["__scopeId","data-v-1b507698"]]),Ke={class:"recipe-list-page"},Qe={class:"page-container"},We={class:"sidebar-area"},Xe={class:"main-content-area"},Ye={class:"content-header"},Ze={class:"sort-control"},et=["value"],tt={key:0,class:"loading-state"},st={key:1,class:"recipes-grid"},at={key:2,class:"no-data-state"},it={key:3,class:"pagination-container"},ot={class:"pagination"},lt=["disabled"],ct={class:"page-numbers"},nt=["onClick"],rt=["disabled"],E=6,dt={__name:"RecipeListPage",setup(u){const h=_(!1),k=_([]),p=_({...D}),i=_("all"),g=_("recommend"),a=_(1),C=w(()=>{let s=[...k.value];i.value!=="all"&&(s=s.filter(m=>m.category===q(i.value)));const d=p.value.features.filter(m=>m.checked&&m.id!=="all");d.length>0&&(s=s.filter(m=>d.some(f=>{switch(f.id){case"vegetarian":return m.tags.includes("素食");default:return!0}})));const R=p.value.cookTime.filter(m=>m.checked);R.length>0&&(s=s.filter(m=>{const f=parseInt(m.cookTime);return R.some(F=>{switch(F.id){case"15min":return f<=15;case"30min":return f<=30;case"1hour":return f<=60;default:return!0}})}));const n=p.value.difficulty.filter(m=>m.checked);if(n.length>0){const m=n.map(f=>{switch(f.id){case"easy":return"簡單";case"medium":return"中等";case"hard":return"困難";default:return f.id}});s=s.filter(f=>m.includes(f.difficulty))}switch(g.value){case"recommend":s.sort((f,F)=>F.isRecommended-f.isRecommended);break;case"difficulty":const m={簡單:1,中等:2,困難:3};s.sort((f,F)=>m[f.difficulty]-m[F.difficulty]);break;case"time":s.sort((f,F)=>parseInt(f.cookTime)-parseInt(F.cookTime));break;case"popular":s.sort(()=>Math.random()-.5);break}return s}),T=w(()=>Math.ceil(C.value.length/E)),v=w(()=>{const s=(a.value-1)*E,d=s+E;return C.value.slice(s,d)}),r=w(()=>{const s=T.value,d=a.value,R=[];if(s<=7)for(let n=1;n<=s;n++)R.push(n);else{const n=Math.max(1,d-3),m=Math.min(s,n+6);for(let f=n;f<=m;f++)R.push(f)}return R}),t=w(()=>k.value.filter(s=>s.isRecommended).slice(0,3)),c=async()=>{h.value=!0;try{await new Promise(s=>setTimeout(s,500)),k.value=X,console.log("✅ 食譜資料載入成功:",k.value.length,"筆")}catch(s){console.error("❌ 載入食譜失敗:",s)}finally{h.value=!1}},M=s=>{p.value=s,a.value=1},N=s=>{i.value=s,a.value=1},O=()=>{a.value=1},S=s=>{s>=1&&s<=T.value&&(a.value=s,window.scrollTo({top:0,behavior:"smooth"}))},V=()=>{p.value={...D},i.value="all",g.value="recommend",a.value=1},q=s=>({soup:"湯品",vegetable:"蔬菜",dessert:"甜點",salad:"沙拉",meat:"肉類",rice:"飯類"})[s]||s;return H(()=>{c()}),(s,d)=>{const R=Q("Footer");return o(),l("div",Ke,[e("div",Qe,[e("div",We,[I(ge,{filters:p.value,onUpdateFilters:M},null,8,["filters"])]),e("div",Xe,[e("div",Ye,[d[4]||(d[4]=e("h2",{class:"page-title"},"食譜推薦",-1)),e("div",Ze,[d[3]||(d[3]=e("label",{class:"sort-label"},"排序方式：",-1)),J(e("select",{"onUpdate:modelValue":d[0]||(d[0]=n=>g.value=n),onChange:O,class:"sort-select"},[(o(!0),l(b,null,$(L(Z),n=>(o(),l("option",{key:n.value,value:n.value},y(n.label),9,et))),128))],544),[[K,g.value]])])]),I(ke,{"category-tags":L(Y),"active-category":i.value,onCategoryChange:N},null,8,["category-tags","active-category"]),h.value?(o(),l("div",tt,d[5]||(d[5]=[e("p",null,"🔄 載入食譜資料中...",-1)]))):v.value.length>0?(o(),l("div",st,[(o(!0),l(b,null,$(v.value,n=>(o(),W(Be,{key:n.id,recipe:n},null,8,["recipe"]))),128))])):(o(),l("div",at,[d[6]||(d[6]=e("p",null,"😔 目前沒有符合條件的食譜",-1)),e("button",{onClick:V,class:"reset-btn"},"重置篩選條件")])),T.value>1?(o(),l("div",it,[e("div",ot,[e("button",{disabled:a.value===1,onClick:d[1]||(d[1]=n=>S(a.value-1)),class:"page-btn prev-btn"}," 上一頁 ",8,lt),e("div",ct,[(o(!0),l(b,null,$(r.value,n=>(o(),l("button",{key:n,class:P(["page-number",{active:a.value===n}]),onClick:m=>S(n)},y(n),11,nt))),128))]),e("button",{disabled:a.value===T.value,onClick:d[2]||(d[2]=n=>S(a.value+1)),class:"page-btn next-btn"}," 下一頁 ",8,rt)])])):B("",!0),I(Je,{"recommended-recipes":t.value},null,8,["recommended-recipes"])])]),I(R)])}}},mt=j(dt,[["__scopeId","data-v-a9829cab"]]);export{mt as default};
