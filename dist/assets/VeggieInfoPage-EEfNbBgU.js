import{_ as lt,q as ye,u as He,h as tt,r as et,i as Qt,w as xt,c as $,o as M,b as f,l as ut,a as rt,t as F,f as At,s as Ae,d as Pe,g as Ve,x as Be,F as nt,y as kt,e as at,z as St,A as Re,B as Ee,C as We,n as Bt,j,p as qt,m as Qe}from"./index-DmGRutL1.js";import{a as _e}from"./index-t--hEgTQ.js";import{r as Xe,g as ze,R as Kt}from"./RecipeRecommendCard-C3ixW5Ao.js";function Je(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function je(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function Ze(t){return t}var Nt=1,Yt=2,Rt=3,Mt=4,Gt=1e-6;function qe(t){return"translate("+t+",0)"}function Ke(t){return"translate(0,"+t+")"}function Ge(t){return e=>+t(e)}function tn(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function en(){return!this.__axis}function Ce(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,d=t===Nt||t===Mt?-1:1,_=t===Mt||t===Yt?"x":"y",l=t===Nt||t===Rt?qe:Ke;function p(A){var B=r??(e.ticks?e.ticks.apply(e,n):e.domain()),R=i??(e.tickFormat?e.tickFormat.apply(e,n):Ze),X=Math.max(a,0)+o,P=e.range(),O=+P[0]+c,I=+P[P.length-1]+c,Y=(e.bandwidth?tn:Ge)(e.copy(),c),b=A.selection?A.selection():A,m=b.selectAll(".domain").data([null]),v=b.selectAll(".tick").data(B,e).order(),w=v.exit(),k=v.enter().append("g").attr("class","tick"),H=v.select("line"),V=v.select("text");m=m.merge(m.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),v=v.merge(k),H=H.merge(k.append("line").attr("stroke","currentColor").attr(_+"2",d*a)),V=V.merge(k.append("text").attr("fill","currentColor").attr(_,d*X).attr("dy",t===Nt?"0em":t===Rt?"0.71em":"0.32em")),A!==b&&(m=m.transition(A),v=v.transition(A),H=H.transition(A),V=V.transition(A),w=w.transition(A).attr("opacity",Gt).attr("transform",function(g){return isFinite(g=Y(g))?l(g+c):this.getAttribute("transform")}),k.attr("opacity",Gt).attr("transform",function(g){var y=this.parentNode.__axis;return l((y&&isFinite(y=y(g))?y:Y(g))+c)})),w.remove(),m.attr("d",t===Mt||t===Yt?s?"M"+d*s+","+O+"H"+c+"V"+I+"H"+d*s:"M"+c+","+O+"V"+I:s?"M"+O+","+d*s+"V"+c+"H"+I+"V"+d*s:"M"+O+","+c+"H"+I),v.attr("opacity",1).attr("transform",function(g){return l(Y(g)+c)}),H.attr(_+"2",d*a),V.attr(_,d*X).text(R),b.filter(en).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Yt?"start":t===Mt?"end":"middle"),b.each(function(){this.__axis=Y})}return p.scale=function(A){return arguments.length?(e=A,p):e},p.ticks=function(){return n=Array.from(arguments),p},p.tickArguments=function(A){return arguments.length?(n=A==null?[]:Array.from(A),p):n.slice()},p.tickValues=function(A){return arguments.length?(r=A==null?null:Array.from(A),p):r&&r.slice()},p.tickFormat=function(A){return arguments.length?(i=A,p):i},p.tickSize=function(A){return arguments.length?(a=s=+A,p):a},p.tickSizeInner=function(A){return arguments.length?(a=+A,p):a},p.tickSizeOuter=function(A){return arguments.length?(s=+A,p):s},p.tickPadding=function(A){return arguments.length?(o=+A,p):o},p.offset=function(A){return arguments.length?(c=+A,p):c},p}function nn(t){return Ce(Rt,t)}function rn(t){return Ce(Mt,t)}const Et=Math.PI,Wt=2*Et,ft=1e-6,an=Wt-ft;function Se(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function sn(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Se;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class on{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Se:sn(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,d=i-n,_=s-e,l=o-n,p=_*_+l*l;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>ft)if(!(Math.abs(l*c-d*_)>ft)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let A=r-s,B=i-o,R=c*c+d*d,X=A*A+B*B,P=Math.sqrt(R),O=Math.sqrt(p),I=a*Math.tan((Et-Math.acos((R+p-X)/(2*P*O)))/2),Y=I/O,b=I/P;Math.abs(Y-1)>ft&&this._append`L${e+Y*_},${n+Y*l}`,this._append`A${a},${a},0,0,${+(l*A>_*B)},${this._x1=e+b*c},${this._y1=n+b*d}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),d=e+o,_=n+c,l=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${d},${_}`:(Math.abs(this._x1-d)>ft||Math.abs(this._y1-_)>ft)&&this._append`L${d},${_}`,r&&(p<0&&(p=p%Wt+Wt),p>an?this._append`A${r},${r},0,1,${l},${e-o},${n-c}A${r},${r},0,1,${l},${this._x1=d},${this._y1=_}`:p>ft&&this._append`A${r},${r},0,${+(p>=Et)},${l},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}const Ot=new Date,Lt=new Date;function st(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),e(a,o),t(a);while(d<a&&a<s);return c},i.filter=a=>st(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(Ot.setTime(+a),Lt.setTime(+s),t(Ot),t(Lt),Math.floor(n(Ot,Lt))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const un=1e3,Xt=un*60,ln=Xt*60,Ut=ln*24,be=Ut*7,zt=st(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xt)/Ut,t=>t.getDate()-1);zt.range;const Jt=st(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ut,t=>t.getUTCDate()-1);Jt.range;const cn=st(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ut,t=>Math.floor(t/Ut));cn.range;function mt(t){return st(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Xt)/be)}const Te=mt(0),Dt=mt(1),fn=mt(2),dn=mt(3),_t=mt(4),gn=mt(5),mn=mt(6);Te.range;Dt.range;fn.range;dn.range;_t.range;gn.range;mn.range;function ht(t){return st(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/be)}const we=ht(0),Ft=ht(1),hn=ht(2),pn=ht(3),Ct=ht(4),vn=ht(5),yn=ht(6);we.range;Ft.range;hn.range;pn.range;Ct.range;vn.range;yn.range;const dt=st(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());dt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:st(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});dt.range;const gt=st(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:st(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});gt.range;function Ht(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Pt(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function bt(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function An(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,d=Tt(i),_=wt(i),l=Tt(a),p=wt(a),A=Tt(s),B=wt(s),R=Tt(o),X=wt(o),P=Tt(c),O=wt(c),I={a:z,A:L,b:it,B:J,c:null,d:ie,e:ie,f:Rn,g:Kn,G:tr,H:Pn,I:Vn,j:Bn,L:Me,m:En,M:Wn,p:pt,q:ot,Q:ue,s:le,S:Qn,u:Xn,U:zn,V:Jn,w:jn,W:Zn,x:null,X:null,y:qn,Y:Gn,Z:er,"%":oe},Y={a:vt,A:jt,b:It,B:$t,c:null,d:se,e:se,f:ir,g:hr,G:vr,H:nr,I:rr,j:ar,L:Ue,m:sr,M:or,p:C,q:E,Q:ue,s:le,S:ur,u:lr,U:cr,V:fr,w:dr,W:gr,x:null,X:null,y:mr,Y:pr,Z:yr,"%":oe},b={a:H,A:V,b:g,B:y,c:T,d:re,e:re,f:Yn,g:ne,G:ee,H:ae,I:ae,j:Dn,L:Nn,m:xn,M:Fn,p:k,q:$n,Q:Ln,s:Hn,S:In,u:Tn,U:wn,V:Mn,w:bn,W:kn,x,X:Z,y:ne,Y:ee,Z:Un,"%":On};I.x=m(n,I),I.X=m(r,I),I.c=m(e,I),Y.x=m(n,Y),Y.X=m(r,Y),Y.c=m(e,Y);function m(h,S){return function(U){var u=[],q=-1,N=0,K=h.length,G,ct,Zt;for(U instanceof Date||(U=new Date(+U));++q<K;)h.charCodeAt(q)===37&&(u.push(h.slice(N,q)),(ct=te[G=h.charAt(++q)])!=null?G=h.charAt(++q):ct=G==="e"?" ":"0",(Zt=S[G])&&(G=Zt(U,ct)),u.push(G),N=q+1);return u.push(h.slice(N,q)),u.join("")}}function v(h,S){return function(U){var u=bt(1900,void 0,1),q=w(u,h,U+="",0),N,K;if(q!=U.length)return null;if("Q"in u)return new Date(u.Q);if("s"in u)return new Date(u.s*1e3+("L"in u?u.L:0));if(S&&!("Z"in u)&&(u.Z=0),"p"in u&&(u.H=u.H%12+u.p*12),u.m===void 0&&(u.m="q"in u?u.q:0),"V"in u){if(u.V<1||u.V>53)return null;"w"in u||(u.w=1),"Z"in u?(N=Pt(bt(u.y,0,1)),K=N.getUTCDay(),N=K>4||K===0?Ft.ceil(N):Ft(N),N=Jt.offset(N,(u.V-1)*7),u.y=N.getUTCFullYear(),u.m=N.getUTCMonth(),u.d=N.getUTCDate()+(u.w+6)%7):(N=Ht(bt(u.y,0,1)),K=N.getDay(),N=K>4||K===0?Dt.ceil(N):Dt(N),N=zt.offset(N,(u.V-1)*7),u.y=N.getFullYear(),u.m=N.getMonth(),u.d=N.getDate()+(u.w+6)%7)}else("W"in u||"U"in u)&&("w"in u||(u.w="u"in u?u.u%7:"W"in u?1:0),K="Z"in u?Pt(bt(u.y,0,1)).getUTCDay():Ht(bt(u.y,0,1)).getDay(),u.m=0,u.d="W"in u?(u.w+6)%7+u.W*7-(K+5)%7:u.w+u.U*7-(K+6)%7);return"Z"in u?(u.H+=u.Z/100|0,u.M+=u.Z%100,Pt(u)):Ht(u)}}function w(h,S,U,u){for(var q=0,N=S.length,K=U.length,G,ct;q<N;){if(u>=K)return-1;if(G=S.charCodeAt(q++),G===37){if(G=S.charAt(q++),ct=b[G in te?S.charAt(q++):G],!ct||(u=ct(h,U,u))<0)return-1}else if(G!=U.charCodeAt(u++))return-1}return u}function k(h,S,U){var u=d.exec(S.slice(U));return u?(h.p=_.get(u[0].toLowerCase()),U+u[0].length):-1}function H(h,S,U){var u=A.exec(S.slice(U));return u?(h.w=B.get(u[0].toLowerCase()),U+u[0].length):-1}function V(h,S,U){var u=l.exec(S.slice(U));return u?(h.w=p.get(u[0].toLowerCase()),U+u[0].length):-1}function g(h,S,U){var u=P.exec(S.slice(U));return u?(h.m=O.get(u[0].toLowerCase()),U+u[0].length):-1}function y(h,S,U){var u=R.exec(S.slice(U));return u?(h.m=X.get(u[0].toLowerCase()),U+u[0].length):-1}function T(h,S,U){return w(h,e,S,U)}function x(h,S,U){return w(h,n,S,U)}function Z(h,S,U){return w(h,r,S,U)}function z(h){return s[h.getDay()]}function L(h){return a[h.getDay()]}function it(h){return c[h.getMonth()]}function J(h){return o[h.getMonth()]}function pt(h){return i[+(h.getHours()>=12)]}function ot(h){return 1+~~(h.getMonth()/3)}function vt(h){return s[h.getUTCDay()]}function jt(h){return a[h.getUTCDay()]}function It(h){return c[h.getUTCMonth()]}function $t(h){return o[h.getUTCMonth()]}function C(h){return i[+(h.getUTCHours()>=12)]}function E(h){return 1+~~(h.getUTCMonth()/3)}return{format:function(h){var S=m(h+="",I);return S.toString=function(){return h},S},parse:function(h){var S=v(h+="",!1);return S.toString=function(){return h},S},utcFormat:function(h){var S=m(h+="",Y);return S.toString=function(){return h},S},utcParse:function(h){var S=v(h+="",!0);return S.toString=function(){return h},S}}}var te={"-":"",_:" ",0:"0"},Q=/^\s*\d+/,_n=/^%/,Cn=/[\\^$*+?|[\]().{}]/g;function D(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Sn(t){return t.replace(Cn,"\\$&")}function Tt(t){return new RegExp("^(?:"+t.map(Sn).join("|")+")","i")}function wt(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function bn(t,e,n){var r=Q.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Tn(t,e,n){var r=Q.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function wn(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Mn(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function kn(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ee(t,e,n){var r=Q.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ne(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Un(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $n(t,e,n){var r=Q.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function xn(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function re(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Dn(t,e,n){var r=Q.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ae(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Fn(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function In(t,e,n){var r=Q.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Nn(t,e,n){var r=Q.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Yn(t,e,n){var r=Q.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function On(t,e,n){var r=_n.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ln(t,e,n){var r=Q.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Hn(t,e,n){var r=Q.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ie(t,e){return D(t.getDate(),e,2)}function Pn(t,e){return D(t.getHours(),e,2)}function Vn(t,e){return D(t.getHours()%12||12,e,2)}function Bn(t,e){return D(1+zt.count(dt(t),t),e,3)}function Me(t,e){return D(t.getMilliseconds(),e,3)}function Rn(t,e){return Me(t,e)+"000"}function En(t,e){return D(t.getMonth()+1,e,2)}function Wn(t,e){return D(t.getMinutes(),e,2)}function Qn(t,e){return D(t.getSeconds(),e,2)}function Xn(t){var e=t.getDay();return e===0?7:e}function zn(t,e){return D(Te.count(dt(t)-1,t),e,2)}function ke(t){var e=t.getDay();return e>=4||e===0?_t(t):_t.ceil(t)}function Jn(t,e){return t=ke(t),D(_t.count(dt(t),t)+(dt(t).getDay()===4),e,2)}function jn(t){return t.getDay()}function Zn(t,e){return D(Dt.count(dt(t)-1,t),e,2)}function qn(t,e){return D(t.getFullYear()%100,e,2)}function Kn(t,e){return t=ke(t),D(t.getFullYear()%100,e,2)}function Gn(t,e){return D(t.getFullYear()%1e4,e,4)}function tr(t,e){var n=t.getDay();return t=n>=4||n===0?_t(t):_t.ceil(t),D(t.getFullYear()%1e4,e,4)}function er(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+D(e/60|0,"0",2)+D(e%60,"0",2)}function se(t,e){return D(t.getUTCDate(),e,2)}function nr(t,e){return D(t.getUTCHours(),e,2)}function rr(t,e){return D(t.getUTCHours()%12||12,e,2)}function ar(t,e){return D(1+Jt.count(gt(t),t),e,3)}function Ue(t,e){return D(t.getUTCMilliseconds(),e,3)}function ir(t,e){return Ue(t,e)+"000"}function sr(t,e){return D(t.getUTCMonth()+1,e,2)}function or(t,e){return D(t.getUTCMinutes(),e,2)}function ur(t,e){return D(t.getUTCSeconds(),e,2)}function lr(t){var e=t.getUTCDay();return e===0?7:e}function cr(t,e){return D(we.count(gt(t)-1,t),e,2)}function $e(t){var e=t.getUTCDay();return e>=4||e===0?Ct(t):Ct.ceil(t)}function fr(t,e){return t=$e(t),D(Ct.count(gt(t),t)+(gt(t).getUTCDay()===4),e,2)}function dr(t){return t.getUTCDay()}function gr(t,e){return D(Ft.count(gt(t)-1,t),e,2)}function mr(t,e){return D(t.getUTCFullYear()%100,e,2)}function hr(t,e){return t=$e(t),D(t.getUTCFullYear()%100,e,2)}function pr(t,e){return D(t.getUTCFullYear()%1e4,e,4)}function vr(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ct(t):Ct.ceil(t),D(t.getUTCFullYear()%1e4,e,4)}function yr(){return"+0000"}function oe(){return"%"}function ue(t){return+t}function le(t){return Math.floor(+t/1e3)}var yt,xe;Ar({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ar(t){return yt=An(t),xe=yt.format,yt.parse,yt.utcFormat,yt.utcParse,yt}function W(t){return function(){return t}}function De(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new on(e)}function Fe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ie(t){this._context=t}Ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ne(t){return new Ie(t)}function Ye(t){return t[0]}function Oe(t){return t[1]}function Le(t,e){var n=W(!0),r=null,i=Ne,a=null,s=De(o);t=typeof t=="function"?t:t===void 0?Ye:W(t),e=typeof e=="function"?e:e===void 0?Oe:W(e);function o(c){var d,_=(c=Fe(c)).length,l,p=!1,A;for(r==null&&(a=i(A=s())),d=0;d<=_;++d)!(d<_&&n(l=c[d],d,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(l,d,c),+e(l,d,c));if(A)return a=null,A+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:W(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:W(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:W(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function Vt(t,e,n){var r=null,i=W(!0),a=null,s=Ne,o=null,c=De(d);t=typeof t=="function"?t:t===void 0?Ye:W(+t),e=typeof e=="function"?e:W(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Oe:W(+n);function d(l){var p,A,B,R=(l=Fe(l)).length,X,P=!1,O,I=new Array(R),Y=new Array(R);for(a==null&&(o=s(O=c())),p=0;p<=R;++p){if(!(p<R&&i(X=l[p],p,l))===P)if(P=!P)A=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),B=p-1;B>=A;--B)o.point(I[B],Y[B]);o.lineEnd(),o.areaEnd()}P&&(I[p]=+t(X,p,l),Y[p]=+e(X,p,l),o.point(r?+r(X,p,l):I[p],n?+n(X,p,l):Y[p]))}if(O)return o=null,O+""||null}function _(){return Le().defined(i).curve(s).context(a)}return d.x=function(l){return arguments.length?(t=typeof l=="function"?l:W(+l),r=null,d):t},d.x0=function(l){return arguments.length?(t=typeof l=="function"?l:W(+l),d):t},d.x1=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:W(+l),d):r},d.y=function(l){return arguments.length?(e=typeof l=="function"?l:W(+l),n=null,d):e},d.y0=function(l){return arguments.length?(e=typeof l=="function"?l:W(+l),d):e},d.y1=function(l){return arguments.length?(n=l==null?null:typeof l=="function"?l:W(+l),d):n},d.lineX0=d.lineY0=function(){return _().x(t).y(e)},d.lineY1=function(){return _().x(t).y(n)},d.lineX1=function(){return _().x(r).y(e)},d.defined=function(l){return arguments.length?(i=typeof l=="function"?l:W(!!l),d):i},d.curve=function(l){return arguments.length?(s=l,a!=null&&(o=s(a)),d):s},d.context=function(l){return arguments.length?(l==null?a=o=null:o=s(a=l),d):a},d}const ce="/assets/season-badge-DSuQaXJI.png",_r={"30days":[{date:"2025/03/26",price:29},{date:"2025/03/27",price:30},{date:"2025/03/28",price:30},{date:"2025/03/29",price:31},{date:"2025/03/30",price:32},{date:"2025/03/31",price:31},{date:"2025/04/01",price:30},{date:"2025/04/02",price:31},{date:"2025/04/03",price:30},{date:"2025/04/04",price:32},{date:"2025/04/05",price:33},{date:"2025/04/06",price:32},{date:"2025/04/07",price:33},{date:"2025/04/08",price:34},{date:"2025/04/09",price:34},{date:"2025/04/10",price:35},{date:"2025/04/11",price:36},{date:"2025/04/12",price:36},{date:"2025/04/13",price:35},{date:"2025/04/14",price:35},{date:"2025/04/15",price:34},{date:"2025/04/16",price:33},{date:"2025/04/17",price:34},{date:"2025/04/18",price:38},{date:"2025/04/19",price:36},{date:"2025/04/20",price:37},{date:"2025/04/21",price:36},{date:"2025/04/22",price:35},{date:"2025/04/23",price:35},{date:"2025/04/24",price:37},{date:"2025/04/25",price:30}]},Cr={class:"main-info-card"},Sr={class:"left"},br=["src"],Tr={class:"center"},wr={class:"title-line"},Mr={class:"name"},kr={class:"english-name"},Ur=["src"],$r={class:"sub-info"},xr={class:"price-warning"},Dr={class:"price-badge"},Fr={class:"right"},Ir={class:"date-text"},Nr="2001",Yr="2002",Or={__name:"VeggieMainInfoCard",props:{veggie:{type:Object,required:!0}},setup(t){var V;const e=t,{veggie:n}=ye(e),r=He(),i=Pe(),a=Ae(),s="".replace(/\/$/,"");function o(){const g=localStorage.getItem("userToken")||"";return g?`Bearer ${g.replace(/^Bearer\s+/,"")}`:""}function c(){return r.userId||Number(localStorage.getItem("userId"))||null}function d(){var T,x,Z,z;const g=((T=n.value)==null?void 0:T.foodId)??((x=n.value)==null?void 0:x.id)??((Z=n.value)==null?void 0:Z.code)??null,y=a.params.id||a.query.foodId||((z=a.path.match(/\/veggie\/([^/?#]+)/))==null?void 0:z[1])||null;return g??y}async function _(g,y,{query:T,body:x}={}){const Z=T?`?${new URLSearchParams(T).toString()}`:"",z=`${s}${y}${Z}`,L=new Headers;L.set("Accept","application/json"),x&&L.set("Content-Type","application/json");const it=o();it&&(L.set("Authorization",it),L.set("token",it.replace(/^Bearer\s+/,"")),L.set("X-Auth-Token",it.replace(/^Bearer\s+/,"")));const J=await fetch(z,{method:g,headers:L,credentials:"include",body:x?JSON.stringify(x):void 0}),pt=await J.text(),ot=pt?JSON.parse(pt):{};if(!J.ok){const vt=new Error((ot==null?void 0:ot.message)||`HTTP ${J.status}`);throw vt.status=J.status,vt}return ot}const l=(g,y)=>_("POST",`/api/memberUser/favorites/food/${encodeURIComponent(g)}`,{query:{userId:y}}),p=(g,y)=>_("DELETE",`/api/memberUser/favorites/food/${encodeURIComponent(g)}`,{query:{userId:y}}),A=new Set(["0000","0",0]);async function B(g,y){var z;const T=await _("GET","/api/memberUser/favorites/food",{query:{userId:y}}),x=((z=T==null?void 0:T.data)==null?void 0:z.items)??(T==null?void 0:T.data)??(T==null?void 0:T.items)??[];return(Array.isArray(x)?x:[]).some(L=>{if(typeof L=="string")return L===String(g);const it=(L==null?void 0:L.foodId)??(L==null?void 0:L.value)??(L==null?void 0:L.id);return String(it)===String(g)})}function R(g){const y=String((g==null?void 0:g.code)??""),T=String((g==null?void 0:g.message)??"");return A.has(y)||y===Nr||/success|成功|ok/i.test(T)}function X(g){const y=String((g==null?void 0:g.code)??""),T=String((g==null?void 0:g.message)??"");return A.has(y)||y===Yr||/success|成功|ok|移除|刪除/i.test(T)}const P=tt(()=>{const g=n.value.date;if(!g)return"";const y=new Date(g),T=y.getFullYear(),x=String(y.getMonth()+1).padStart(2,"0"),Z=String(y.getDate()).padStart(2,"0");return`${T}/${x}/${Z}`}),O=et(!!((V=n.value)!=null&&V.isFavorite)),I=et(!1);async function Y(){if(!r.isAuthenticated)return;const g=c(),y=d();if(!g||!y)return;const T=await B(y,g);T===!0&&(O.value=!0),T===!1&&(O.value=!1)}Qt(Y),xt([()=>r.isAuthenticated,()=>a.fullPath,()=>{var g,y;return((g=n.value)==null?void 0:g.id)??((y=n.value)==null?void 0:y.foodId)}],Y);async function b(){if(!r.isAuthenticated){localStorage.setItem("redirectAfterLogin",a.fullPath),i.push("/member/login");return}if(I.value)return;I.value=!0;const g=c(),y=d();if(!g){alert("找不到使用者資訊，請重新登入後再試。"),i.push("/member/login"),I.value=!1;return}if(!y){alert("找不到食材 ID，無法收藏。"),I.value=!1;return}const T=O.value;O.value=!T;try{if(T){const x=await p(y,g);if(!X(x))throw new Error((x==null?void 0:x.message)||"移除收藏失敗");O.value=!1}else{const x=await l(y,g);if(!R(x))throw new Error((x==null?void 0:x.message)||"加入收藏失敗");O.value=!0}}catch(x){O.value=T,(x==null?void 0:x.status)===401?(alert("請先登入再使用收藏功能"),localStorage.setItem("redirectAfterLogin",a.fullPath),i.push("/member/login")):alert((x==null?void 0:x.message)||"操作失敗，請稍後再試")}finally{I.value=!1}}const m=tt(()=>_r["30days"]),v=tt(()=>{const g=m.value;return g.length?g[g.length-1].price:NaN}),w=tt(()=>{const g=m.value,y=g.length-1-7;return y>=0?g[y].price:NaN}),k=tt(()=>{const g=w.value,y=v.value;return g?(y-g)/g*100:NaN}),H=tt(()=>{const g=k.value;return isNaN(g)?"":g>=20?"價格飆漲超過 20%，建議選購替代品":g<=-20?"價格超跌超過 20%，建議多加購買":""});return(g,y)=>(M(),$("div",Cr,[y[1]||(y[1]=f("div",{class:"mobile-badge"},[f("img",{src:ce,alt:"當季推薦"})],-1)),f("div",Sr,[f("img",{src:g.$img(ut(n).image),alt:"蔬菜圖片",class:"veggie-image"},null,8,br)]),f("div",Tr,[f("div",wr,[f("h2",Mr,F(ut(n).name),1),f("span",kr,F(ut(n).nameEn),1),f("button",{class:"favorite-button",onClick:b},[f("img",{src:O.value?ut(Xe):ut(ze),alt:"收藏",class:"heart-icon"},null,8,Ur)])]),f("div",$r,F(ut(n).cookingSuggestions),1),f("div",xr,[f("div",Dr,"最新均價：$"+F(ut(n).displayPrice),1)]),H.value?(M(),$("div",{key:0,class:At(["warning-text",k.value<=-20?"warning-fall":k.value>=20?"warning-rise":""])},F(H.value),3)):rt("",!0)]),f("div",Fr,[f("div",Ir,"數據日期："+F(P.value),1),y[0]||(y[0]=f("div",{class:"season-badge"},[f("img",{src:ce,alt:"當季推薦"})],-1))])]))}},fe=lt(Or,[["__scopeId","data-v-1f01e6aa"]]),Lr={class:"chart-container"},Hr={class:"chart-header"},Pr={class:"period-buttons"},Vr=["onClick"],Br={__name:"AveragePriceTrendChart",props:{foodId:{type:String,required:!0}},setup(t){const e=et(null),n=et(null),r=et("30days"),i=et(null),a={"30days":"30天","6months":"半年","1year":"1年"},s={"30days":"DAY_30","6months":"DAY_180","1year":"DAY_360"},o=et({}),c=et();function d(){const b=new Map;Object.values(o.value).forEach(v=>{Array.isArray(v)&&v.forEach(w=>{b.has(w.date)||b.set(w.date,w.price)})});const m=Array.from(b.values());if(m.length){const v=je(m);typeof v=="number"&&!isNaN(v)&&(c.value=v)}}const _=xe("%m/%d");function l(b=[]){return(b??[]).filter(m=>m&&m.intervalEnd!=null).map(({intervalEnd:m,avgPrice:v})=>({date:m,price:v===0?null:Number(v??null)})).sort((m,v)=>new Date(m.date)-new Date(v.date))}const p=t,A=new Map,B=b=>`${p.foodId}:${b}`;async function R(b,{force:m=!1}={}){const v=B(b);if(!m&&Array.isArray(o.value[v]))return;if(A.has(v))return A.get(v);const w=_e.get("/api/food/average-price-trends",{params:{days:s[b],foodId:p.foodId}}).then(({data:k})=>{const H=(k==null?void 0:k.data)||{},V=H.trend30??H.trendHalfYear??H.trendYear??[];o.value[v]=l(V),d()}).finally(()=>A.delete(v));return A.set(v,w),w}const X=b=>{const m=new Date(b);if(isNaN(m.getTime()))return b;const v=m.getFullYear(),w=String(m.getMonth()+1).padStart(2,"0");if(r.value==="30days"||r.value==="6months"){const k=String(m.getDate()).padStart(2,"0");return`${v}/${w}/${k}`}else return r.value==="1year"?`${v}/${w}`:_(m)};let P=null;function O(b){const m=b.map(w=>({...w,imputed:!1}));let v=0;for(;v<m.length;){if(m[v].price==null||m[v].price<=0){let w=v-1;for(;w>=0&&(m[w].price==null||m[w].price<=0);)w--;let k=v+1;for(;k<m.length&&(m[k].price==null||m[k].price<=0);)k++;if(w>=0&&k<m.length){const H=m[w].price,V=m[k].price,g=k-w;for(let y=w+1;y<k;y++){const T=(y-w)/g;m[y].price=H+(V-H)*T,m[y].imputed=!0}v=k+1;continue}else w>=0?(m[v].price=m[w].price,m[v].imputed=!0):k<m.length&&(m[v].price=m[k].price,m[v].imputed=!0)}v++}return m}function I(){const b=o.value[B(r.value)]||[],m=e.value;if(St(m).selectAll("*").remove(),!b.length)return;const v=O(b);St(m).selectAll("*").remove();const w=m.clientWidth,k={top:20,right:20,bottom:40,left:40},H=w-k.left-k.right,V=H*.5,g=St(m).append("svg").attr("width",w).attr("height",V+k.top+k.bottom).append("g").attr("transform",`translate(${k.left},${k.top})`),y=v.map(C=>C.date);let T;r.value==="30days"?T=y.filter((C,E)=>E%5===0):r.value==="6months"?T=y.filter((C,E)=>E%5===0):r.value==="1year"?T=y.filter((C,E)=>E%2===0):T=y;const x={};let Z=null;T.forEach(C=>{const E=new Date(C),h=E.getFullYear(),S=String(E.getMonth()+1).padStart(2,"0"),U=String(E.getDate()).padStart(2,"0");let u;r.value==="1year"?h!==Z?(u=`${h}/${S}`,Z=h):u=S:r.value==="6months"?h!==Z?(u=`${h}/${S}/${U}`,Z=h):u=`${S}/${U}`:u=_(E),x[C]=u});const z=Re().domain(y).range([0,H]),L=(Ee(v,C=>C.price)||1)*1.2,it=Math.min(c.value*.5,(Je(v,C=>C.price)||c.value)*.9),J=We().domain([it,L]).range([V,0]);g.append("g").attr("transform",`translate(0,${V})`).call(nn(z).tickValues(T).tickFormat(C=>x[C]||C)),g.append("g").call(rn(J));const pt=Vt().x(C=>z(C.date)).y0(V).y1(J(c.value*.8)),ot=Vt().x(C=>z(C.date)).y0(J(c.value*.8)).y1(J(c.value*1.2)),vt=Vt().x(C=>z(C.date)).y0(J(c.value*1.2)).y1(0);g.append("path").datum(v).attr("fill","#e0d7f1").attr("d",pt),g.append("path").datum(v).attr("fill","#e0f1e0").attr("d",ot),g.append("path").datum(v).attr("fill","#f1e0e0").attr("d",vt),[{price:c.value*.8,color:"purple"},{price:c.value,color:"orange"},{price:c.value*1.2,color:"red"}].forEach(({price:C,color:E})=>{g.append("line").attr("x1",0).attr("x2",H).attr("y1",J(C)).attr("y2",J(C)).attr("stroke",E).attr("stroke-width",1).attr("stroke-dasharray","3,3")});const It=Le().x(C=>z(C.date)).y(C=>J(C.price));g.append("path").datum(v).attr("fill","none").attr("stroke","#2e7d32").attr("stroke-width",2).attr("d",It),i.value=null;const $t=b.map((C,E)=>({...v[E],isObserved:C.price!=null&&C.price>0}));g.selectAll(".dot").data($t.filter(C=>C.isObserved)).join("circle").attr("class","dot").attr("cx",C=>z(C.date)).attr("cy",C=>J(C.price)).attr("r",3).attr("fill","#2e7d32").on("mouseover",function(C,E){St(this).attr("r",6),i.value=E}).on("mouseout",function(){St(this).attr("r",3),i.value=null}),g.selectAll(".dot-imputed").data($t.filter(C=>!C.isObserved)).join("circle").attr("class","dot-imputed").attr("cx",C=>z(C.date)).attr("cy",C=>J(C.price)).attr("r",3).attr("fill","white").attr("stroke","#2e7d32").append("title").text(C=>`補值：${X(C.date)}`)}const Y=async b=>{r.value!==b&&(r.value=b,await R(b,{force:!0}),I())};return Qt(async()=>{await R("1year"),await R(r.value),I(),P=new ResizeObserver(()=>I()),P.observe(e.value)}),Ve(()=>{P&&P.disconnect()}),xt(r,async b=>{await R(b),I()}),(b,m)=>(M(),$("div",Lr,[f("div",Hr,[m[1]||(m[1]=f("div",{class:"chart-title"},"平均價格趨勢",-1)),f("div",{ref_key:"tooltipEl",ref:n,class:"fixed-tooltip"},[i.value?(M(),$(nt,{key:0},[kt(" 價格: "+F(i.value.price.toFixed(1)),1),m[0]||(m[0]=f("br",null,null,-1)),kt(" 日期: "+F(X(i.value.date)),1)],64)):rt("",!0)],512),f("div",Pr,[(M(),$(nt,null,at(["30days","6months","1year"],v=>f("button",{key:v,class:At({active:r.value===v}),onClick:w=>Y(v)},F(a[v]),11,Vr)),64))])]),f("div",{ref_key:"chartArea",ref:e,class:"chart-area"},null,512),m[2]||(m[2]=Be('<div class="chart-legend" data-v-1e02d78c><div class="legend-item" data-v-1e02d78c><span class="legend-color orange" data-v-1e02d78c></span>近3年均價(0%)</div><div class="legend-item" data-v-1e02d78c><span class="legend-color purple" data-v-1e02d78c></span>超跌(-20%)</div><div class="legend-item" data-v-1e02d78c><span class="legend-color red" data-v-1e02d78c></span>超漲(+20%)</div></div>',1))]))}},de=lt(Br,[["__scopeId","data-v-1e02d78c"]]),Rr={name:"NutritionInfoCard",props:{nutrition:{type:Object,required:!0}},computed:{orderedMacros(){const t=["carbohydrate","protein","fat","vitamin a","potassium","fiber"],e=(r="")=>String(r).trim().toLowerCase(),n=r=>t.indexOf(e(r));return[...this.nutrition.macros||[]].sort((r,i)=>{const a=n(r.nutrient),s=n(i.nutrient);return(a<0?999:a)-(s<0?999:s)})},parsedBenefits(){var e;const t=(e=this.nutrition)==null?void 0:e.benefits;if(Array.isArray(t))return t.filter(Boolean);if(typeof t=="string"){const n=t.trim();if(!n)return[];try{const r=JSON.parse(n);if(Array.isArray(r))return r.filter(Boolean)}catch{return n.replace(/^\s*\[|\]\s*$/g,"").replace(/^"|"$|^'|'$/g,"").split(/","|','|,|；|;|\n/g).map(i=>i.replace(/^"|"$|^'|'$/g,"").trim()).filter(Boolean)}}return[]}},methods:{colorByIndex(t){return["bar--orange","bar--green","bar--red","bar--blue","bar--purple","bar--teal"][t]},normalize(t=""){const e=String(t).trim().toLowerCase();return{carbs:"carbohydrate",碳水:"carbohydrate",碳水化合物:"carbohydrate","vit a":"vitamin a",vita:"vitamin a",維生素a:"vitamin a","dietary fiber":"fiber",膳食纖維:"fiber",纖維:"fiber",k:"potassium",鉀:"potassium",蛋白質:"protein",脂肪:"fat"}[e]||e},getScaleSpec(t){const e=this.normalize(t);return{carbohydrate:{max:15,unit:"g"},protein:{max:2,unit:"g"},fat:{max:2,unit:"g"},"vitamin a":{max:1e3,unit:"µg"},potassium:{max:1e3,unit:"mg"},fiber:{max:5,unit:"g"}}[e]},getBarWidth(t){const e=Number(t.amount??t.value??0);let n=this.getScaleSpec(t.nutrient);if(!n&&/^vitamin\b/i.test(t.nutrient||"")){const i=(t.unit||"").toLowerCase();n={max:i==="mg"?100:i==="g"?1:1e3,unit:i||"mg"}}if(!n)return 50;const r=this.convertUnit(e,t.unit,n.unit);return Math.min(r/n.max*100,100)},convertUnit(t,e,n){const r=o=>(o||"").replace("μ","µ").toLowerCase(),i=r(e),a=r(n);if(!t||!a)return Number(t)||0;if(i===a)return Number(t);let s;return i==="g"?s=t*1e6:i==="mg"?s=t*1e3:i==="µg"?s=t:s=Number(t)||0,a==="g"?s/1e6:a==="mg"?s/1e3:s},zhName(t=""){const e=String(t).trim().toLowerCase(),n={carbohydrate:"碳水化合物",potassium:"鉀",fiber:"膳食纖維","vitamin c":"維生素C",folate:"葉酸",sugar:"糖",iron:"鐵",calcium:"鈣",protein:"蛋白質","vitamin b12":"維生素B12",fat:"脂肪",cholesterol:"膽固醇","omega-3":"Omega-3 脂肪酸","vitamin d":"維生素D","vitamin a":"維生素A","vitamin k":"維生素K",zinc:"鋅","vitamin b6":"維生素B6"};return n[e]?n[e]:/^vitamin\s+/i.test(t)?`維生素${String(t).replace(/^vitamin\s+/i,"").toUpperCase()}`:t},fmtUnit(t){return t?String(t).replace(/μ|ug/i,"µg"):""}}},Er={class:"nutrition-card"},Wr={class:"sub-section"},Qr={class:"nutrition-bars"},Xr={class:"sub-section"},zr={key:0,class:"benefits-list"},Jr={class:"sub-section"},jr={class:"audience"};function Zr(t,e,n,r,i,a){return M(),$("div",Er,[e[3]||(e[3]=f("div",{class:"section-title"},"營養與健康資訊",-1)),f("div",Wr,[e[0]||(e[0]=f("div",{class:"sub-title"},"主要營養成分",-1)),f("div",Qr,[(M(!0),$(nt,null,at(a.orderedMacros,(s,o)=>(M(),$("div",{class:"nutrition-bar",key:s.nutrient},[f("div",{class:At(["bar-content",a.colorByIndex(o)]),style:Bt({width:a.getBarWidth(s)+"%"})},F(a.zhName(s.nutrient))+" "+F(s.amount)+F(a.fmtUnit(s.unit)),7)]))),128))])]),f("div",Xr,[e[1]||(e[1]=f("div",{class:"sub-title"},"健康益處",-1)),a.parsedBenefits.length?(M(),$("ul",zr,[(M(!0),$(nt,null,at(a.parsedBenefits,(s,o)=>(M(),$("li",{key:o},F(s),1))),128))])):rt("",!0)]),f("div",Jr,[e[2]||(e[2]=f("div",{class:"sub-title"},"適合人群",-1)),f("p",jr,F(n.nutrition.eatingSuggestions),1)])])}const ge=lt(Rr,[["render",Zr],["__scopeId","data-v-4f3e72bf"]]),qr={class:"compare-card"},Kr={class:"header"},Gr={class:"header-text"},ta={class:"subtitle"},ea={class:"tabs"},na=["onClick"],ra={class:"cards"},aa={class:"card-header"},ia={class:"market-name"},sa={key:0,class:"badge"},oa=["src"],ua={class:"price"},la={class:"metrics"},ca={class:"metric"},fa={class:"bar-bg"},da={class:"value"},ga={class:"metric"},ma={class:"bar-bg"},ha={class:"value"},pa={class:"description"},va={class:"tags"},ya={__name:"MultiMarketPriceCompareCard",props:{marketCompare:{type:Array,default:()=>[]},veggieName:{type:String,default:""}},setup(t){const e=t,{marketCompare:n,veggieName:r}=ye(e),i=et("cp"),a=[{value:"cp",label:"按CP值排序"},{value:"price",label:"按價格排序"},{value:"quality",label:"按品質排序"}],s=tt(()=>n.value.length?Math.max(...n.value.map(d=>d.cp)):1),o=tt(()=>!n.value||!Array.isArray(n.value)?[]:[...n.value].sort((d,_)=>i.value==="cp"?_.cp-d.cp:i.value==="price"?(d.pricePerKg??1/0)-(_.pricePerKg??1/0):_.qualityScore-d.qualityScore)),c=tt(()=>{switch(i.value){case"cp":return"最高CP值";case"price":return"最便宜價格";case"quality":return"最高品質";default:return""}});return(d,_)=>(M(),$("div",qr,[f("div",Kr,[f("div",Gr,[_[0]||(_[0]=f("h2",{class:"title"},"多通路價格比較與CP值排行",-1)),f("p",ta," 為您提供最透明的 "+F(ut(r))+" 市場價格對比，讓您做出最明智的選擇 ",1)]),f("div",ea,[(M(),$(nt,null,at(a,l=>f("button",{key:l.value,class:At({active:i.value===l.value}),onClick:p=>i.value=l.value},F(l.label),11,na)),64))])]),f("div",ra,[(M(!0),$(nt,null,at(o.value,(l,p)=>(M(),$("div",{class:At(["card",{highlight:p===0}]),key:l.id},[f("div",aa,[f("span",ia,F(l.channelFoodName),1),p===0?(M(),$("span",sa,F(c.value),1)):rt("",!0)]),f("img",{src:d.$img(l.channelImage),class:"market-img",alt:"市場圖片"},null,8,oa),f("div",ua," NT$"+F(l.price!==void 0?l.price:"—"),1),f("div",la,[f("div",ca,[_[1]||(_[1]=f("span",{class:"label"},"品質分數",-1)),f("div",fa,[f("div",{class:"bar-fill quality",style:Bt({width:l.qualityScore+"%"})},null,4)]),f("span",da,F(l.qualityScore),1)]),f("div",ga,[_[2]||(_[2]=f("span",{class:"label"},"CP值",-1)),f("div",ma,[f("div",{class:"bar-fill cp",style:Bt({width:l.cp/s.value*100+"%"})},null,4)]),f("span",ha,F(typeof l.cp=="number"?l.cp.toFixed(2):"—"),1)])]),f("p",pa,F(l.description),1),f("div",va,[(M(!0),$(nt,null,at(typeof l.tag=="string"?l.tag.split("/"):l.tag,A=>(M(),$("span",{key:A,class:"tag"},F(A),1))),128))])],2))),128))])]))}},me=lt(ya,[["__scopeId","data-v-5dec2aad"]]),Aa={key:0,class:"storage-card"},_a={class:"tips-grid"},Ca={class:"tip-title"},Sa={class:"tip-content"},ba={key:0},Ta={__name:"StorageTipsCard",props:{storageTips:{type:[Object,Array,String],default:()=>({})}},setup(t){const e=t,n=(a="")=>{const s=String(a).split(/[:：]/),o=(s[0]||"").trim(),c=s.slice(1).join("：").trim();return{title:o,desc:c}},r=a=>{if(Array.isArray(a))return a;if(typeof a=="string"){try{const s=JSON.parse(a);if(Array.isArray(s))return s}catch{}return a.split(/\r?\n/).filter(Boolean)}return a&&typeof a=="object"?Object.values(a).filter(Boolean):[]},i=tt(()=>r(e.storageTips).map(a=>n(a)).filter(a=>a.title||a.desc));return(a,s)=>i.value.length?(M(),$("div",Aa,[s[0]||(s[0]=f("div",{class:"header"},[f("h2",{class:"title"},"保存與烹飪技巧")],-1)),f("div",_a,[(M(!0),$(nt,null,at(i.value,(o,c)=>(M(),$("div",{key:c,class:"tip-item"},[f("div",Ca,F(o.title),1),f("div",Sa,[(M(!0),$(nt,null,at(o.desc.split(`
`),(d,_)=>(M(),$("span",{key:_},[kt(F(d),1),_<o.desc.split(`
`).length-1?(M(),$("br",ba)):rt("",!0)]))),128))])]))),128))])])):rt("",!0)}},he=lt(Ta,[["__scopeId","data-v-e4456b90"]]),wa={class:"similar-card"},Ma={class:"items"},ka={class:"item-left"},Ua={class:"icon-wrapper"},$a=["src"],xa={class:"info"},Da={class:"name"},Fa={class:"subtitle"},Ia={class:"price"},Na={__name:"SimilarVeggieCompareCard",props:{similarVeggies:{type:Array,default:()=>[]}},setup(t){const e=r=>{if(typeof r=="number")return r;if(typeof r=="string"){const i=r.match(/-?\d+(\.\d+)?/);return i?Number(i[0]):/上升/.test(r)||r.startsWith("+")?1:/下降/.test(r)||r.startsWith("-")?-1:0}return 0},n=r=>{const i=e(r);return i>0?"↑":i<0?"↓":"-"};return(r,i)=>(M(),$("div",wa,[i[0]||(i[0]=f("div",{class:"header"},[f("h2",{class:"title"},"相關產品比較")],-1)),f("div",Ma,[(M(!0),$(nt,null,at(t.similarVeggies,a=>(M(),$("div",{key:a.id,class:"item"},[f("div",ka,[f("div",Ua,[f("img",{src:r.$img(a.image),alt:""},null,8,$a)]),f("div",xa,[f("div",Da,F(a.name),1),f("div",Fa,F(a.description),1)])]),f("div",Ia,[kt(" $"+F(a.displayPrice)+" ",1),f("span",{class:At(["trend",{up:e(a.trend)>0,down:e(a.trend)<0}])},F(n(a.trend)),3)])]))),128))])]))}},pe=lt(Na,[["__scopeId","data-v-5eb77a8e"]]),Ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGJSURBVHgB7VVLUsJAEO0eRTaicAIHToA3wCNwAnBjlbAQThA4QVIFgSo3HAGPwA3kBJobiCZVSlVI2xNLmAAaMWRj+Rb5Tea9zHvdEygOXJJD14CUICBl/EEBabs30nzKw54QEZC3XhkRLMhm9hZ6RMC5Op4iBG0EasmBV4M9YMOih8apBQgTJLLk8FVCQmwNmd78S3XGwB99NbHU91qlntuB3wg47YJDAqq8kgpbZW6Q226HBJl0AIbsP7dgV4FQ5Do3ISArzKPnViLkCAYRdPj2DlEY0vbK+lxpv9Q/7f2+D+aLLh+neIAjVbo6udPMdWnOViLNuPLGel6IyNb6tVgBtmrGJFUgymM2c6+Tr8YXF+E4+eNt/RPbySoPxIAJSerk+niYF0BZHGXMnQUUVOkS+efr5EsRzkv1DyHV10P/8V7kNAtTiPsIVRRCRFZxCAmgqgUEni0fsIfrSCTA1WMAgdSerC4JncQCj42TYtw7/3+0WIQZYMCb2tCFNPARMu+aSFCBFPAOEAuqR/K++1EAAAAASUVORK5CYII=",Oa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG6SURBVHgB3ZXdTQJBEMf/c6I+mWAHCxXYgWcHWoHwaHwQKuCsAIx8PKIVUAKUYAduByJHIhJgnFnAGHJ3nOSIib+Xm+xN5mN3PoC/xHQ+jGmPr2P/t0Yl1UmykUv6STzvAwsVnyP/g+pYzF5EvIiz4SEhOoANwwvidBhcFS++ab5X4nQo0rikrdEzs7W3J7HRKYVO2Jckz3g6K9jq6RBpMvAwr2n0mM7K2AJPRIeQx/FhLdpWRPQSeYkZgURksQXVYUJA4Ip5DP2tDohnPYnLSvQPSMtEddmSh1qig+XDyn3Kw0bdZxyqy0Rl9+AbZU3FVtiQFO+wBxjUoEI7lGrDgD0MkCG0gK8ZuUZT4/bm5B4ZYjqhvCd8yWD0Kv4M9gLbHH/OL+go19V0tNyQARJ54K59Oq+6A0mn5t4iI9SW2lQ5spOLnXHXtMPeSrm3ltOcbxI5TVnHxDofHQOLX5xvEDtNs+KfOTD1t7wTCEOpNd1U2u52Lac5j0RKynellbCZ0lJsjivOVjs8X/pe4TYTa7PRkxvXOyANdiafS9klg/Um/C5T2UxX3tFBHcyXIMpjF5iHcnXBz13yBVF555R5csW5AAAAAElFTkSuQmCC",La="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJQSURBVHgB1VVRbtpAEJ1xSKpKaUVPkHVOADeAEyQ9QZzP0o/CCfANSNUCP5UIJyg3IDeAG7A3AGFLhMj29O0GUhuDVBL46Egg+zH73tud2YHoyMGbgOouFCXRFTlUpL2j0Ndf3uudAoacJR4SiaJXBWvhk2paJCPgdsIRSaLkKS7rxidNe4RqhyUmGYJRyzKqYv3M4M464bId3MF5SZhu9yU3ob+ej4WkgceSc3bayvwIct/tBKLaQZPeGKobNA3X5Y/AN+98+TOsiyMtqN/p2scGHSBUZ95i4rokScOc+wSKoy1J13l3C2W7bBPH+W9ibjcYuu1g6piOwbkPNsnh4Lf7a3GRxpmiHknUyopOFbOMVCe8SeNC9IAFRVPkMQtl3DrsXNmkZeSl3VNCJeRW0rtw4lO7lkW8jBlhTwTca7fPPSz36NsK5PGRGTEXhfkeTmYcGwKx+wA+E4cGnNj7AgHRAJUhJIMLX9uOJPYcFHYgIrco8gzufBCbxDrugmsKz5JUQFQH9RhYVZ6iMoxogyG3glxflnHZcFht8w5zWPtZ1877z9vvSXFboV4bhku1pnbUFCzyGH5jhvvVzVbtuYdCXOSX/p01uRxhvXZsii5nhToevxfy6nOPmXv2uHMRe/hyt+cIui+kl2NZDcucgHWFhZPah41BGDTRKf6uHHN7UQCVo6Mjx/8vUKA3hKnLy4scUuAx6tO7Ew831k/xjy1+CIHVH5L7L7lse5r4Blesgqnqc4I5tHrOJO7At5LakUMPZo6x25lPjA4dJUT/ASVHNqi743eFAAAAAElFTkSuQmCC",Ha={key:0,class:"ai-suggestion-card"},Pa={class:"icon"},Va=["src","alt"],Ba={class:"info"},Ra={key:0},Ea={__name:"AiSuggestionCard",props:{aiSuggestion:{type:[String,Array],default:()=>"[]"}},setup(t){const e=t,n=(o="")=>{const c=String(o).split(/[:：]/),d=(c[0]||"").trim(),_=c.slice(1).join("：").trim();return{title:d,desc:_}},r=tt(()=>{if(Array.isArray(e.aiSuggestion))return e.aiSuggestion;if(typeof e.aiSuggestion=="string")try{const o=JSON.parse(e.aiSuggestion);return Array.isArray(o)?o:[]}catch{return e.aiSuggestion.split(/\r?\n/).filter(Boolean)}return[]}),i=tt(()=>r.value.map(o=>n(o)).filter(o=>o.title||o.desc).slice(0,3)),a=[Ya,Oa,La],s=o=>a[o]||a[a.length-1];return(o,c)=>i.value.length?(M(),$("div",Ha,[c[0]||(c[0]=f("div",{class:"suggestion-section"},[f("h2",{class:"card-title"},"AI智慧推薦")],-1)),(M(!0),$(nt,null,at(i.value,(d,_)=>(M(),$("div",{key:_,class:"suggestion-section"},[f("div",Pa,[f("img",{src:s(_),alt:d.title},null,8,Va)]),f("div",Ba,[f("h3",null,F(d.title),1),f("p",null,[(M(!0),$(nt,null,at(d.desc.split(`
`),(l,p)=>(M(),$("span",{key:p},[kt(F(l),1),p<d.desc.split(`
`).length-1?(M(),$("br",Ra)):rt("",!0)]))),128))])])]))),128))])):rt("",!0)}},ve=lt(Ea,[["__scopeId","data-v-50ba7798"]]),Wa={class:"VeggieInfoPage"},Qa={class:"veggie-page"},Xa={key:0,class:"content-wrapper"},za={class:"desktop-layout"},Ja={class:"left-panel"},ja={class:"right-panel"},Za={class:"mobile-layout"},qa={__name:"VeggieInfoPage",setup(t){const e=Ae(),n=tt(()=>{var o;return((o=r.value)==null?void 0:o.foodId)||e.params.id||""}),r=et(null),i=et(!1),a=et(null),s=async o=>{i.value=!0,a.value=null;try{const c=await _e.get("/api/food/findFoodData",{params:{foodId:o}});r.value=c.data.data}catch(c){console.error("載入蔬菜資料失敗：",c),a.value="載入資料失敗",r.value=null}finally{i.value=!1}};return Qt(()=>{s(e.params.id)}),xt(()=>e.params.id,o=>{s(o)}),xt(r,o=>{console.log("🔥 載入的蔬菜資料：",o)}),(o,c)=>{const d=Qe("Footer");return M(),$("div",Wa,[f("div",Qa,[r.value?(M(),$("div",Xa,[f("div",za,[f("div",Ja,[j(ve,{aiSuggestion:r.value.aiSuggestion},null,8,["aiSuggestion"]),j(ge,{nutrition:r.value.nutrition},null,8,["nutrition"]),j(pe,{similarVeggies:r.value.similarVeggies},null,8,["similarVeggies"])]),f("div",ja,[j(fe,{veggie:r.value},null,8,["veggie"]),n.value?(M(),qt(de,{key:n.value,"food-id":n.value},null,8,["food-id"])):rt("",!0),j(me,{marketCompare:r.value.marketCompare,veggieName:r.value.name},null,8,["marketCompare","veggieName"]),j(Kt,{recipes:r.value.recipes},null,8,["recipes"]),j(he,{storageTips:r.value.storageTips},null,8,["storageTips"])])]),f("div",Za,[j(fe,{veggie:r.value},null,8,["veggie"]),j(ve,{aiSuggestion:r.value.aiSuggestion},null,8,["aiSuggestion"]),n.value?(M(),qt(de,{key:n.value,"food-id":n.value},null,8,["food-id"])):rt("",!0),j(me,{marketCompare:r.value.marketCompare,veggieName:r.value.name},null,8,["marketCompare","veggieName"]),j(Kt,{recipes:r.value.recipes},null,8,["recipes"]),j(ge,{nutrition:r.value.nutrition},null,8,["nutrition"]),j(pe,{similarVeggies:r.value.similarVeggies},null,8,["similarVeggies"]),j(he,{storageTips:r.value.storageTips},null,8,["storageTips"])])])):rt("",!0)]),j(d)])}}},ei=lt(qa,[["__scopeId","data-v-3de1e5fd"]]);export{ei as default};
